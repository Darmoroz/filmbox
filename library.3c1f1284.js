function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},l=t.parcelRequire7ae9;null==l&&((l=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var l={id:e,exports:{}};return n[e]=l,t.call(l.exports,l,l.exports),l.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){a[e]=t},t.parcelRequire7ae9=l);var o=l("9OeKo"),r=l("krGWQ"),d=l("4S0r6"),i=l("hkaSy"),c=l("31u3U"),s=l("aLPhN"),u=l("boduE"),f=l("aomY9"),g=l("6ZObK"),m=l("20Q1x"),v=l("7Y9D8");function b(e){y(e.target)}function y(e){let t;e.classList.add("btn--active"),e.setAttribute("disabled",!0);const n=[...e.parentElement.children].find((t=>t!==e));if(n.classList.remove("btn--active"),n.removeAttribute("disabled"),"watched"===e.dataset.value&&(t=(0,c.getLocalStorage)(r.WATCHED)),"queue"===e.dataset.value&&(t=(0,c.getLocalStorage)(r.QUEUE)),t.forEach((e=>{e.genre_ids=e.genres.map((e=>e.id))})),!t.length)return console.log("abra"),r.gallery.innerHTML='<p class="empty">empty list</p>',void console.dir(r.gallery);const a=(0,s.default)(t);r.gallery.innerHTML="",r.gallery.insertAdjacentHTML("beforeend",a),r.gallery.addEventListener("click",L)}async function L(e){await(0,u.default)(e);const t=document.querySelector(".btn--active").dataset.value;document.querySelectorAll(".btn--modify")[1].style.display="none";const n=document.querySelectorAll(".btn--modify")[0];n.removeAttribute("disabled"),n.innerHTML="watched"===t?"Remove from WATCHED":"Remove from QUEUE";document.getElementById("btn-collection").removeEventListener("click",r.globalHandlers.handleClickAddToCollection),n.addEventListener("click",E)}function E(e){const t=+e.target.dataset.movieId,n=document.querySelector(".btn--active");let a;e.target.setAttribute("disabled",!0),v.Notify.success("Successful"),"watched"===n.dataset.value?(a=(0,c.getLocalStorage)(r.WATCHED).filter((e=>e.id!==t)),(0,c.setLocalStorage)(r.WATCHED,a),setTimeout((()=>{(0,g.default)(r.modal),(0,m.default)(),r.modalFullMovie.innerHTML=""}),1e3),y(n)):(a=(0,c.getLocalStorage)(r.QUEUE).filter((e=>e.id!==t)),(0,c.setLocalStorage)(r.QUEUE,a),setTimeout((()=>{(0,g.default)(r.modal),(0,m.default)(),r.modalFullMovie.innerHTML=""}),1e3),y(n))}(0,d.setThemeFirstRender)(),window.addEventListener("DOMContentLoaded",(async()=>{try{Object.assign(r.genres,await(0,f.default)()),y(r.watchedBtnLibrary),r.watchedBtnLibrary.addEventListener("click",b),r.queueBtnLibrary.addEventListener("click",b),window.addEventListener("scroll",e(o)(i.default,500)),r.toggleThemeBtn.addEventListener("click",d.toggleTheme)}catch(e){return console.log("Error",e),null}}));
//# sourceMappingURL=library.3c1f1284.js.map
