{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,6BCAAD,EAAAC,EAAA,S,gFCAAC,EAAAD,EAAA,SCAAD,EAAAC,EAAA,S,sFAUeE,I,OAAAA,EAAfC,EAAAJ,EAAA,CAAAI,EAAAC,GAAAC,MAAA,SAAAC,EAAoCC,G,IAASC,EAOnCC,EACAC,EACAC,EAWAC,EAEAC,EAAQC,EAAAC,U,yEArBH,KAD8BP,EAAAM,EAAAE,OAAA,YAAAF,EAAA,GAAQA,EAAA,GAAD,KAEhDb,EAAAgB,QAAQC,UAAY,GACpBC,MAEF,EAAAC,EAAAC,SAAOpB,EAAAqB,Q,mBAEkB,EAAAC,EAAAC,WAAU,SAAiBC,OAARlB,GAAW,CAAEC,KAAMA,I,UAAvDC,EAAQiB,EAAAC,KACRjB,EAAUD,EAASmB,KAAKlB,QACxBC,EAAaF,EAASmB,KAAKC,cAC7BrB,EAAOG,GAAU,C,uBACnBmB,EAAAC,OAAOC,KAAM,mBAAmB,CAC9BC,SAAU,aACVC,SAAU,OACVF,KAAM,CACJG,UAAW,U,2BAKXvB,GAAS,EAAAwB,EAAAf,SAA8BX,GAC7CT,EAAAgB,QAAQoB,mBAAmB,YAAazB,IAClCC,EAAWyB,SAASC,cAAc,4BAEtCC,EAA8BC,QAAQ5B,G,yDAGxC6B,QAAQC,IAAI,QAAOjB,EAAAkB,I,kBACZ,M,0BAEP,EAAAxB,EAAAC,SAAOpB,EAAAqB,Q,6EA9BIpB,EAAoB2C,MAAAC,KAAA/B,U,KAkCnCgC,E,SAlCoCxC,G,OAArBL,EAAoB2C,MAAAC,KAAA/B,U,KCVnChB,EAAAC,EAAA,S,mGAUegD,I,OAAAA,EAAf7C,EAAAJ,EAAA,CAAAI,EAAAC,GAAAC,MAAA,SAAAC,EAAkC2C,EAAOzC,G,IAW/BC,EAIAC,EACAC,EAuBAC,EAGAC,E,yEAzCPV,EAAA+C,EAAA,CAAGjD,EAAAkD,aAAaC,iBAAiB,SAASC,KAAI,SAAAC,GAC7CA,EAAIC,UAAUC,OAAO,eACrBF,EAAIG,gBAAgB,W,IAET,IAATjD,IACFP,EAAAgB,QAAQC,UAAY,GACpBC,MAEF,EAAAC,EAAAC,SAAOpB,EAAAqB,Q,mBAEkB,EAAAC,EAAAC,WAAU,eAAgB,CAC/CyB,MAAOA,EAAMS,MACblD,S,UAFIC,EAAQiB,EAAAC,KAIRjB,EAAUD,EAASmB,KAAKlB,QACxBC,EAAaF,EAASmB,KAAKC,YAC5BnB,EAAQM,OAAM,C,uBACjBc,EAAAC,OAAOC,KAAK,GAAeP,OAAZwB,EAAMS,MAAM,8BAA6B,CACtDzB,SAAU,aACVC,SAAU,OACVF,KAAM,CACJG,UAAW,UAGflC,EAAA0D,gBAAgBC,iBAAiBF,MAAQ,G,gCAGvClD,EAAOG,GAAU,C,uBACnBmB,EAAAC,OAAOC,KAAM,mBAAmB,CAC9BC,SAAU,aACVC,SAAU,OACVF,KAAM,CACJG,UAAW,U,2BAMXvB,GAAS,EAAAwB,EAAAf,SAA8BX,GAC7CT,EAAAgB,QAAQoB,mBAAmB,YAAazB,IAElCC,EAAWyB,SAASC,cAAc,4BAEtCsB,EAA4BpB,QAAQ5B,G,yDAGtC6B,QAAQC,IAAI,QAAOjB,EAAAkB,I,kBACZ,M,0BAEP,EAAAxB,EAAAC,SAAOpB,EAAAqB,Q,8EAlDsBuB,MAAAC,KAAA/B,U,KAsDjC+C,E,SAtDkCb,EAAOzC,G,OAA1BwC,EAAkBH,MAAAC,KAAA/B,U,EFLpBgD,EAA6B,IAAIC,sBAC5C,SAACC,EAASC,GACRD,EAAQE,SAAQ,SAAAC,GACVA,EAAMC,iBACRH,EAASI,UAAUF,EAAMG,QACzBtE,EAAAuE,WAAWC,oBAAsB,EACjCC,EAAqBzE,EAAAuE,WAAWC,oB,OAK3BZ,EAA8B,IAAIG,sBAC7C,SAACC,EAASC,GACRD,EAAQE,SAAQ,SAAAC,GACVA,EAAMC,iBACRH,EAASI,UAAUF,EAAMG,QACzBtE,EAAAuE,WAAWC,oBAAsB,EACjCX,EAAmB7D,EAAA0E,WAAY1E,EAAAuE,WAAWC,oB,OAKrCjC,EAAgC,IAAIwB,sBAC/C,SAACC,EAASC,GACRD,EAAQE,SAAQ,SAAAC,GACVA,EAAMC,iBACRH,EAASI,UAAUF,EAAMG,QACzBtE,EAAAuE,WAAWC,oBAAsB,EACjC1B,EAAqB9C,EAAAM,QAAQmD,MAAOzD,EAAAuE,WAAWC,oB,OAMhD,SAAStD,IACdlB,EAAAuE,WAAWC,mBAAqB,C,UDjCnBG,I,OAAAA,EAAfzE,EAAAJ,EAAA,CAAAI,EAAAC,GAAAC,MAAA,SAAAC,I,IAAoCE,EAG1BC,EACAG,EAIAC,EAAQC,EAAAC,U,yEARkBP,EAAAM,EAAAE,OAAA,YAAAF,EAAA,GAAQA,EAAA,GAAD,GACzC,EAAAM,EAAAC,SAAOpB,EAAAqB,Q,mBAEkB,EAAAC,EAAAC,WAAW,qBAAqB,CAAEhB,KAAMA,I,OAAzDC,EAAQiB,EAAAC,KACRf,GAAS,EAAAwB,EAAAf,SAA8BZ,EAASmB,KAAKlB,SAC3DT,EAAAgB,QAAQoB,mBAAmB,YAAazB,GACxCX,EAAAgB,QAAQ4D,iBAAiB,QAASC,EAAAzD,UAE5BR,EAAWyB,SAASC,cAAc,4BAEtCwB,EAA2BtB,QAAQ5B,G,yDAGrC6B,QAAQC,IAAI,QAAOjB,EAAAkB,I,kBACZ,M,0BAEP,EAAAxB,EAAAC,SAAOpB,EAAAqB,Q,6EAhBIsD,EAAoB/B,MAAAC,KAAA/B,U,KAoBnC2D,E,kBApBeE,EAAoB/B,MAAAC,KAAA/B,U,2CIPnCe,EAAA9B,EAAA,S,iBAeA+E,EAXA,SAAiCC,GAC/BA,EAAEC,iBAEFhF,EAAA0E,WAAWjB,MAAQsB,EAAET,OAAOX,iBAAiBF,MAAMwB,OAC9CjF,EAAA0E,WAAWjB,MAIhBI,EAAmB7D,EAAA0E,WAAY,GAH7B7C,EAAAC,OAAOC,KAAK,uB,eCThBjC,EAAAC,EAAA,S,gDAIemF,I,OAAAA,EAAfhF,EAAAJ,EAAA,CAAAI,EAAAC,GAAAC,MAAA,SAAAC,EAAiC0E,G,IAU/BI,EARMC,EAIAC,EACAC,E,qEANNtF,EAAA0D,gBAAgBC,iBAAiBF,MAAQ,IACnC2B,EAAgBL,EAAET,UACFS,EAAEQ,cAAa,C,mDAG/BF,EAAWnF,EAAA+C,EAAA,CAAG8B,EAAEQ,cAAcpC,iBAAiB,SAC/CmC,EAAYD,EAAQG,QAAO,SAAAnC,G,OAC/BA,EAAIC,UAAUmC,SAAS,c,IAEb,QAAZN,EAAAG,EAAU,UAAE,IAAZH,KAAc3B,gBAAgB,YAC1B8B,EAAU,KAAOF,EAAa,C,kDAGlCC,EAAQjC,KAAI,SAAAC,G,OAAOA,EAAIC,UAAUC,OAAO,c,IACxC6B,EAAc9B,UAAUoC,IAAI,eAC5BN,EAAcO,aAAa,YAAY,GACvC3F,EAAAM,QAAQmD,MAAQ2B,EAAcQ,QAAQnC,M,KAE9BzD,EAAAM,QAAQmD,M,OACT,c,KAAW,GAGX,YAHWhC,EAAAkB,IAIX,cADSlB,EAAAkB,IAET,aADWlB,EAAAkB,GADF,GAEC,G,qBAJb8B,I,oCAKA3B,EAAqB9C,EAAAM,QAAQmD,O,6BAI7BhB,QAAQC,IAAI,mB,6CA9BcE,MAAAC,KAAA/B,U,KAkChC+E,E,SAlCiCd,G,OAAlBG,EAAiBtC,MAAAC,KAAA/B,U,GNKhC,EAAAgF,EAAAC,uBAEAC,OAAOpB,iBAAiB,mBAAoB1E,EAAAJ,EAAA,CAAAI,EAAAC,GAAAC,MAAA,SAAAC,I,uFAExC4F,O,KAAcjG,EAAAkG,O,UAAc,EAAAC,EAAA/E,W,mBAA5BK,EAAAkB,GAAOyD,OAAMC,KAAA5E,EAAAkB,GAAAlB,EAAA6E,GAAA7E,EAAA8E,IACb9B,IAEAzE,EAAA0D,gBAAgBkB,iBAAiB,SAAUE,GAC3CzC,SAASmE,KAAK5B,iBAAiB,SAAU1E,EAAAuG,EAAA,CAASC,EAAAtF,QAAc,MAChEpB,EAAA2G,eAAe/B,iBAAiB,QAASkB,EAAAc,aACzC5G,EAAAkD,aAAa0B,iBAAiB,QAASiB,G,yDAEvCpD,QAAQC,IAAI,QAAOjB,EAAAoF,I,kBACZ,M","sources":["src/js/home.js","src/js/render/renderTrendingMovies.js","src/js/infiniteScroll.js","src/js/render/renderFeaturedMovies.js","src/js/render/renderSearchMovies.js","src/js/onSubmitSearchMovieForm.js","src/js/getFeaturedMovies.js"],"sourcesContent":["import throttle from 'lodash.throttle';\nimport renderTrendingMovies from './render/renderTrendingMovies';\nimport handleScroll from './toTopBtn';\nimport { genres, searchMovieForm, toggleThemeBtn, featuredBtns } from './refs';\nimport { setThemeFirstRender, toggleTheme } from './theme';\nimport onSubmitSearchMovieForm from './onSubmitSearchMovieForm';\nimport getAllGenres from './getAllGenres';\nimport getFeaturedMovies from './getFeaturedMovies';\n\nsetThemeFirstRender();\n\nwindow.addEventListener('DOMContentLoaded', async () => {\n  try {\n    Object.assign(genres, await getAllGenres());\n    renderTrendingMovies();\n\n    searchMovieForm.addEventListener('submit', onSubmitSearchMovieForm);\n    document.body.addEventListener('scroll', throttle(handleScroll, 500));\n    toggleThemeBtn.addEventListener('click', toggleTheme);\n    featuredBtns.addEventListener('click', getFeaturedMovies);\n  } catch (error) {\n    console.log('Error', error);\n    return null;\n  } finally {\n  }\n});\n","import { getMovies } from '../api';\nimport { gallery, loader } from '../refs';\nimport toggle from '../toggle';\nimport createMarkupGalleryMoviesCard from '../markup/createMarkupGalleryMoviesCard';\nimport renderMovieFullInfo from './renderMovieFullInfo';\nimport { observerGalleryTrendMovies } from '../infiniteScroll';\n\nasync function renderTrendingMovies(page = 1) {\n  toggle(loader);\n  try {\n    const response = await getMovies(`trending/movie/day`, { page: page });\n    const markup = createMarkupGalleryMoviesCard(response.data.results);\n    gallery.insertAdjacentHTML('beforeend', markup);\n    gallery.addEventListener('click', renderMovieFullInfo);\n\n    const lastCard = document.querySelector('.movie-card:last-child');\n    if (lastCard) {\n      observerGalleryTrendMovies.observe(lastCard);\n    }\n  } catch (error) {\n    console.log('Error', error);\n    return null;\n  } finally {\n    toggle(loader);\n  }\n}\n\nexport default renderTrendingMovies;\n","import { pagination, queryMovie, urlPath } from './refs';\nimport renderFeaturedMovies from './render/renderFeaturedMovies';\nimport renderSearchMovies from './render/renderSearchMovies';\nimport renderTrendingMovies from './render/renderTrendingMovies';\n\nexport const observerGalleryTrendMovies = new IntersectionObserver(\n  (entries, observer) => {\n    entries.forEach(entry => {\n      if (entry.isIntersecting) {\n        observer.unobserve(entry.target);\n        pagination.nextPagePagination += 1;\n        renderTrendingMovies(pagination.nextPagePagination);\n      }\n    });\n  }\n);\nexport const observerGallerySearchMovies = new IntersectionObserver(\n  (entries, observer) => {\n    entries.forEach(entry => {\n      if (entry.isIntersecting) {\n        observer.unobserve(entry.target);\n        pagination.nextPagePagination += 1;\n        renderSearchMovies(queryMovie, pagination.nextPagePagination);\n      }\n    });\n  }\n);\nexport const observerGalleryFeaturedMovies = new IntersectionObserver(\n  (entries, observer) => {\n    entries.forEach(entry => {\n      if (entry.isIntersecting) {\n        observer.unobserve(entry.target);\n        pagination.nextPagePagination += 1;\n        renderFeaturedMovies(urlPath.value, pagination.nextPagePagination);\n      }\n    });\n  }\n);\n\nexport function resetNextPagePagination() {\n  pagination.nextPagePagination = 1;\n}\n","import { Notify } from 'notiflix';\nimport { getMovies } from '../api';\nimport createMarkupGalleryMoviesCard from '../markup/createMarkupGalleryMoviesCard';\nimport { gallery, loader } from '../refs';\nimport toggle from '../toggle';\nimport {\n  observerGalleryFeaturedMovies,\n  resetNextPagePagination,\n} from '../infiniteScroll';\n\nasync function renderFeaturedMovies(urlPath, page = 1) {\n  if (page === 1) {\n    gallery.innerHTML = '';\n    resetNextPagePagination();\n  }\n  toggle(loader);\n  try {\n    const response = await getMovies(`movie/${urlPath}`, { page: page });\n    const results = response.data.results;\n    const totalPages = response.data.total_pages;\n    if (page > totalPages) {\n      Notify.info(`It was last page`, {\n        position: 'center-top',\n        fontSize: '16px',\n        info: {\n          textColor: '#000',\n        },\n      });\n      return;\n    }\n    const markup = createMarkupGalleryMoviesCard(results);\n    gallery.insertAdjacentHTML('beforeend', markup);\n    const lastCard = document.querySelector('.movie-card:last-child');\n    if (lastCard) {\n      observerGalleryFeaturedMovies.observe(lastCard);\n    }\n  } catch (error) {\n    console.log('Error', error);\n    return null;\n  } finally {\n    toggle(loader);\n  }\n}\n\nexport default renderFeaturedMovies;\n","import { Notify } from 'notiflix';\nimport { getMovies } from '../api';\nimport { featuredBtns, gallery, loader, searchMovieForm } from '../refs';\nimport toggle from '../toggle';\nimport createMarkupGalleryMoviesCard from '../markup/createMarkupGalleryMoviesCard';\nimport {\n  observerGallerySearchMovies,\n  resetNextPagePagination,\n} from '../infiniteScroll';\n\nasync function renderSearchMovies(query, page) {\n  [...featuredBtns.querySelectorAll('.btn')].map(btn => {\n    btn.classList.remove('btn--active');\n    btn.removeAttribute('disabled');\n  });\n  if (page === 1) {\n    gallery.innerHTML = '';\n    resetNextPagePagination();\n  }\n  toggle(loader);\n  try {\n    const response = await getMovies('search/movie', {\n      query: query.value,\n      page,\n    });\n    const results = response.data.results;\n    const totalPages = response.data.total_pages;\n    if (!results.length) {\n      Notify.info(`${query.value} nothing found. Try again.`, {\n        position: 'center-top',\n        fontSize: '16px',\n        info: {\n          textColor: '#000',\n        },\n      });\n      searchMovieForm.searchMovieQuery.value = '';\n      return;\n    }\n    if (page > totalPages) {\n      Notify.info(`It was last page`, {\n        position: 'center-top',\n        fontSize: '16px',\n        info: {\n          textColor: '#000',\n        },\n      });\n      return;\n    }\n\n    const markup = createMarkupGalleryMoviesCard(results);\n    gallery.insertAdjacentHTML('beforeend', markup);\n\n    const lastCard = document.querySelector('.movie-card:last-child');\n    if (lastCard) {\n      observerGallerySearchMovies.observe(lastCard);\n    }\n  } catch (error) {\n    console.log('Error', error);\n    return null;\n  } finally {\n    toggle(loader);\n  }\n}\n\nexport default renderSearchMovies;\n","import { Notify } from 'notiflix';\nimport renderSearchMovies from './render/renderSearchMovies';\nimport { queryMovie } from './refs';\n\nfunction onSubmitSearchMovieForm(e) {\n  e.preventDefault();\n\n  queryMovie.value = e.target.searchMovieQuery.value.trim();\n  if (!queryMovie.value) {\n    Notify.info('Please enter request');\n    return;\n  }\n  renderSearchMovies(queryMovie, 1);\n}\n\nexport default onSubmitSearchMovieForm;\n","import { searchMovieForm, urlPath } from './refs';\nimport renderFeaturedMovies from './render/renderFeaturedMovies';\nimport renderTrendingMovies from './render/renderTrendingMovies';\n\nasync function getFeaturedMovies(e) {\n  searchMovieForm.searchMovieQuery.value = '';\n  const targetElement = e.target;\n  if (targetElement === e.currentTarget) {\n    return;\n  }\n  const allBtns = [...e.currentTarget.querySelectorAll('.btn')];\n  const activeBtn = allBtns.filter(btn =>\n    btn.classList.contains('btn--active')\n  );\n  activeBtn[0]?.removeAttribute('disabled');\n  if (activeBtn[0] === targetElement) {\n    return;\n  }\n  allBtns.map(btn => btn.classList.remove('btn--active'));\n  targetElement.classList.add('btn--active');\n  targetElement.setAttribute('disabled', true);\n  urlPath.value = targetElement.dataset.value;\n\n  switch (urlPath.value) {\n    case 'trend_day':\n      renderTrendingMovies();\n      break;\n    case 'popular':\n    case 'top_rated':\n    case 'upcoming':\n      renderFeaturedMovies(urlPath.value);\n      break;\n\n    default:\n      console.log('something wrong');\n  }\n}\n\nexport default getFeaturedMovies;\n"],"names":["$bpxeT","parcelRequire","$4Nugj","$a1b2b866133a39ff$var$_renderFeaturedMovies","$parcel$interopDefault","$2TvXO","mark","_callee","urlPath","page","response","results","totalPages","markup","lastCard","_args","arguments","length","gallery","innerHTML","$f8acf03b81129d03$export$2faba8f7b002dd52","$k7GPO","default","loader","$b7ONl","getMovies","concat","_ctx","sent","data","total_pages","$6JpON","Notify","info","position","fontSize","textColor","$6mu73","insertAdjacentHTML","document","querySelector","$f8acf03b81129d03$export$c6b1dc255fab6aec","observe","console","log","t0","apply","this","$a1b2b866133a39ff$export$2e2bcd8739ae039","$0641f3aa05616e87$var$_renderSearchMovies","query","$8nrFW","featuredBtns","querySelectorAll","map","btn","classList","remove","removeAttribute","value","searchMovieForm","searchMovieQuery","$f8acf03b81129d03$export$cd39ae8a5da59201","$0641f3aa05616e87$export$2e2bcd8739ae039","$f8acf03b81129d03$export$223c31cbeac42de7","IntersectionObserver","entries","observer","forEach","entry","isIntersecting","unobserve","target","pagination","nextPagePagination","$b12c8daf08db148f$export$2e2bcd8739ae039","queryMovie","$b12c8daf08db148f$var$_renderTrendingMovies","addEventListener","$kfpeU","$c3e2ba566ee1489b$export$2e2bcd8739ae039","e","preventDefault","trim","$286f58dd429bea9f$var$_getFeaturedMovies","ref","targetElement","allBtns","activeBtn","currentTarget","filter","contains","add","setAttribute","dataset","$286f58dd429bea9f$export$2e2bcd8739ae039","$9VC5X","setThemeFirstRender","window","Object","genres","$iw235","assign","call","t1","t2","body","$dCfNN","$dEmTs","toggleThemeBtn","toggleTheme","t3"],"version":3,"file":"index.02be2877.js.map"}